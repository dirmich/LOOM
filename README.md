# LOOM LFL íŒŒì¼ ë¶„ì„ ë„êµ¬

SCUMM v3 (LOOM) LFL íŒŒì¼ì„ ë¶„ì„í•˜ê³  ì •ë³´ë¥¼ ì¶”ì¶œí•˜ëŠ” Python ë„êµ¬ì…ë‹ˆë‹¤.

## íŒŒì¼ ëª©ë¡

- **scummvm.md** - LFL íŒŒì¼ í¬ë§· ìƒì„¸ ë¬¸ì„œ
- **lfl_analyzer.py** - Python ë¶„ì„ ë„êµ¬
- **\*.LFL** - LOOM ê²Œì„ ë¦¬ì†ŒìŠ¤ íŒŒì¼

## ë¹ ë¥¸ ì‹œì‘

### 1. ë‹¨ì¼ íŒŒì¼ ë¶„ì„

```bash
python3 lfl_analyzer.py 01.LFL
```

**ì¶œë ¥ ì˜ˆì‹œ**:
```
======================================================================
ğŸ“„ íŒŒì¼: 01.LFL
======================================================================

ğŸ“Š ê¸°ë³¸ ì •ë³´
   íƒ€ì…: room
   í¬ê¸°: 55,213 bytes
   ë£¸ í¬ê¸°: 19866x48128 pixels
   ì„¤ëª…: ë£¸ ë¦¬ì†ŒìŠ¤ íŒŒì¼

ğŸ“ ë¦¬ì†ŒìŠ¤ ì˜¤í”„ì…‹ í…Œì´ë¸”
   ë°œê²¬ëœ ì˜¤í”„ì…‹: 20ê°œ
   # 1: ìœ„ì¹˜ 0x0004 â†’ ì˜¤í”„ì…‹ 0x0140 (   320 bytes)
   # 2: ìœ„ì¹˜ 0x0006 â†’ ì˜¤í”„ì…‹ 0x0090 (   144 bytes)
   ...
```

### 2. ì „ì²´ ë””ë ‰í† ë¦¬ ë¶„ì„

```bash
python3 lfl_analyzer.py --all .
```

**ì¶œë ¥ ì˜ˆì‹œ**:
```
ğŸ” ì´ 75ê°œ LFL íŒŒì¼ ë°œê²¬

======================================================================
ğŸ“Š ì „ì²´ í†µê³„
======================================================================
   ì´ íŒŒì¼ ìˆ˜: 75ê°œ
   ì´ í¬ê¸°: 1,984,680 bytes (1.89 MB)
   í‰ê·  í¬ê¸°: 26,462 bytes
   ë£¸ íŒŒì¼: 74ê°œ
```

### 3. ë³µí˜¸í™”ëœ íŒŒì¼ ì €ì¥

```bash
python3 lfl_analyzer.py 01.LFL --export-decrypted
```

ìƒì„±ë˜ëŠ” íŒŒì¼: `01.decrypted` (0xFF XOR ë³µí˜¸í™”ëœ ì›ë³¸ ë°ì´í„°)

### 4. í—¤ë” ì •ë³´ ì €ì¥

```bash
python3 lfl_analyzer.py 01.LFL --export-header
```

ìƒì„±ë˜ëŠ” íŒŒì¼: `01.info.txt` (í—¤ë” ë° ì˜¤í”„ì…‹ ì •ë³´)

### 5. ëª¨ë“  ì •ë³´ ì¶”ì¶œ

```bash
python3 lfl_analyzer.py 01.LFL --export-decrypted --export-header --output ./output
```

## ì‚¬ìš©ë²•

```
usage: lfl_analyzer.py [-h] [--all DIR] [--export-decrypted]
                       [--export-header] [--output DIR] [file]

SCUMM LFL íŒŒì¼ ë¶„ì„ ë„êµ¬ (LOOM)

positional arguments:
  file                  ë¶„ì„í•  LFL íŒŒì¼

optional arguments:
  -h, --help            ë„ì›€ë§ í‘œì‹œ
  --all DIR             ë””ë ‰í† ë¦¬ ë‚´ ëª¨ë“  LFL íŒŒì¼ ë¶„ì„
  --export-decrypted    ë³µí˜¸í™”ëœ ë°ì´í„°ë¥¼ íŒŒì¼ë¡œ ì €ì¥
  --export-header       í—¤ë” ì •ë³´ë¥¼ í…ìŠ¤íŠ¸ íŒŒì¼ë¡œ ì €ì¥
  --output DIR, -o DIR  ì¶œë ¥ ë””ë ‰í† ë¦¬ (ê¸°ë³¸: í˜„ì¬ ë””ë ‰í† ë¦¬)
```

## ê¸°ëŠ¥

### ë¶„ì„ ê¸°ëŠ¥

- âœ… 0xFF XOR ë³µí˜¸í™”
- âœ… ë£¸ í—¤ë” íŒŒì‹± (ë„ˆë¹„, ë†’ì´)
- âœ… ë¦¬ì†ŒìŠ¤ ì˜¤í”„ì…‹ í…Œì´ë¸” ì¶”ì¶œ
- âœ… ë°ì´í„° ì„¹ì…˜ ìë™ íƒì§€
- âœ… ì—”íŠ¸ë¡œí”¼ ê¸°ë°˜ ë°ì´í„° íƒ€ì… ì¶”ì •
- âœ… 00.LFL ì¸ë±ìŠ¤ íŒŒì¼ ë¶„ì„

### ì¶”ì¶œ ê¸°ëŠ¥

- âœ… ë³µí˜¸í™”ëœ ë°ì´í„° ì €ì¥
- âœ… í—¤ë” ë° ì˜¤í”„ì…‹ ì •ë³´ ì €ì¥
- âœ… ë””ë ‰í† ë¦¬ ì¼ê´„ ì²˜ë¦¬

### ë°ì´í„° íƒ€ì… ì¶”ì •

| ì—”íŠ¸ë¡œí”¼ | ì¶”ì • íƒ€ì… |
|---------|----------|
| < 10% | íŒ¨ë”©/ë‹¨ìˆœ ë°ì´í„° |
| 10-30% | ìŠ¤í¬ë¦½íŠ¸/ì½”ë“œ |
| 30-60% | ì••ì¶• ë°ì´í„° |
| > 60% | ê·¸ë˜í”½/ì‚¬ìš´ë“œ |

## ì¶œë ¥ í˜•ì‹

### ê¸°ë³¸ ì •ë³´
- íŒŒì¼ íƒ€ì… (index/room)
- íŒŒì¼ í¬ê¸°
- ë£¸ í¬ê¸° (width Ã— height)

### ë¦¬ì†ŒìŠ¤ ì˜¤í”„ì…‹ í…Œì´ë¸”
- ì˜¤í”„ì…‹ ìœ„ì¹˜
- ë¦¬ì†ŒìŠ¤ ì‹œì‘ ì£¼ì†Œ
- ë¦¬ì†ŒìŠ¤ í¬ê¸°

### ë°ì´í„° ì„¹ì…˜
- ì„¹ì…˜ ë²”ìœ„ (ì‹œì‘-ë)
- ì„¹ì…˜ í¬ê¸°
- í—¥ìŠ¤ ë¯¸ë¦¬ë³´ê¸°
- ì¶”ì • ë°ì´í„° íƒ€ì…

### ì—”íŠ¸ë¡œí”¼ ë¶„ì„
- íŒŒì¼ì„ 4ê°œ ì„¹ì…˜ìœ¼ë¡œ ë‚˜ëˆ„ì–´ ë¶„ì„
- ê° ì„¹ì…˜ì˜ ì—”íŠ¸ë¡œí”¼ í¼ì„¼íŠ¸
- ë°ì´í„° íƒ€ì… ì¶”ì •

## ì˜ˆì œ

### ì˜ˆì œ 1: íŠ¹ì • ë£¸ ë¶„ì„

```bash
python3 lfl_analyzer.py 10.LFL
```

### ì˜ˆì œ 2: ëª¨ë“  íŒŒì¼ ë¶„ì„ ë° í†µê³„

```bash
python3 lfl_analyzer.py --all . > analysis_report.txt
```

### ì˜ˆì œ 3: ì—¬ëŸ¬ íŒŒì¼ ë°°ì¹˜ ì²˜ë¦¬

```bash
for file in 01.LFL 02.LFL 03.LFL; do
    python3 lfl_analyzer.py "$file" --export-decrypted --output ./decrypted
done
```

### ì˜ˆì œ 4: ì¸ë±ìŠ¤ íŒŒì¼ ë¶„ì„

```bash
python3 lfl_analyzer.py 00.LFL
```

## Python ì½”ë“œ ì˜ˆì œ

### ê¸°ë³¸ ì‚¬ìš©

```python
from lfl_analyzer import LFLAnalyzer

# íŒŒì¼ ë¶„ì„
analyzer = LFLAnalyzer('01.LFL')
analyzer.analyze()
analyzer.print_report()

# í—¤ë” ì •ë³´ ì ‘ê·¼
print(f"ë£¸ í¬ê¸°: {analyzer.header['width']}x{analyzer.header['height']}")

# ì˜¤í”„ì…‹ ì ‘ê·¼
for pos, offset in analyzer.offsets:
    print(f"ë¦¬ì†ŒìŠ¤ ì˜¤í”„ì…‹: 0x{offset:04x}")
```

### ì§ì ‘ ë³µí˜¸í™”

```python
# íŒŒì¼ ì½ê¸°
with open('01.LFL', 'rb') as f:
    encrypted = f.read()

# 0xFF XOR ë³µí˜¸í™”
decrypted = bytes([b ^ 0xFF for b in encrypted])

# í—¤ë” íŒŒì‹±
import struct
width = struct.unpack('<H', decrypted[0:2])[0]
height = struct.unpack('<H', decrypted[2:4])[0]

print(f"ë£¸ í¬ê¸°: {width}x{height}")
```

## ê¸°ìˆ  ì •ë³´

### LFL íŒŒì¼ êµ¬ì¡°

```
00.LFL (ì¸ë±ìŠ¤)
â”œâ”€ ë§¤ì§ í—¤ë”: FF FE 17 FC
â””â”€ ë¦¬ì†ŒìŠ¤ ë¹„íŠ¸ë§µ í…Œì´ë¸”

XX.LFL (ë£¸ íŒŒì¼)
â”œâ”€ [ì•”í˜¸í™”: 0xFF XOR]
â”œâ”€ í—¤ë”
â”‚  â”œâ”€ ë£¸ ë„ˆë¹„ (16ë¹„íŠ¸)
â”‚  â”œâ”€ ë£¸ ë†’ì´ (16ë¹„íŠ¸)
â”‚  â””â”€ ì˜¤í”„ì…‹ í…Œì´ë¸” (16ë¹„íŠ¸ ë°°ì—´)
â””â”€ ë¦¬ì†ŒìŠ¤ ë°ì´í„°
   â”œâ”€ ê·¸ë˜í”½ (EGA ë¹„íŠ¸ë§µ)
   â”œâ”€ ìŠ¤í¬ë¦½íŠ¸ (SCUMM ë°”ì´íŠ¸ì½”ë“œ)
   â”œâ”€ ì‚¬ìš´ë“œ
   â”œâ”€ ì• ë‹ˆë©”ì´ì…˜
   â””â”€ íŒ”ë ˆíŠ¸
```

### SCUMM v3 íŠ¹ì§•

- ì²­í¬ íƒœê·¸ ì—†ìŒ (old-style)
- 16ë¹„íŠ¸ ì£¼ì†Œ ì²´ê³„
- ë¦¬í‹€ ì—”ë””ì•ˆ ë°”ì´íŠ¸ ìˆœì„œ
- 0xFF XOR ì•”í˜¸í™”
- ê³ ì • ì˜¤í”„ì…‹ ê¸°ë°˜ êµ¬ì¡°

## ë¬¸ì„œ

ìƒì„¸í•œ íŒŒì¼ í¬ë§· ì •ë³´ëŠ” **scummvm.md** ë¬¸ì„œë¥¼ ì°¸ê³ í•˜ì„¸ìš”.

## ìš”êµ¬ì‚¬í•­

- Python 3.6 ì´ìƒ
- í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë§Œ ì‚¬ìš© (ì™¸ë¶€ ì˜ì¡´ì„± ì—†ìŒ)

## ë¼ì´ì„¼ìŠ¤

ë¶„ì„ ë„êµ¬ëŠ” êµìœ¡ ë° ì—°êµ¬ ëª©ì ìœ¼ë¡œ ììœ ë¡­ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ì°¸ê³ 

- LOOM ê²Œì„ì€ LucasArtsì˜ ì €ì‘ë¬¼ì…ë‹ˆë‹¤
- ScummVM: https://www.scummvm.org/
- SCUMM ìœ„í‚¤: https://wiki.scummvm.org/

## ê°œë°œ ì •ë³´

- **ì‘ì„±ì¼**: 2025ë…„
- **ë¶„ì„ ëŒ€ìƒ**: LOOM (DOS EGA ë²„ì „)
- **SCUMM ë²„ì „**: v3
- **ë„êµ¬**: Python 3

---

**ë¶„ì„ ì™„ë£Œ!** LOOMì˜ ë¹„ë°€ì„ íƒí—˜í•˜ì„¸ìš”! ğŸ®âœ¨
