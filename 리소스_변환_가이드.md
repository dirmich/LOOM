# LOOM ë¦¬ì†ŒìŠ¤ ë³€í™˜ ê°€ì´ë“œ

LOOMì˜ ëª¨ë“  ë¦¬ì†ŒìŠ¤ë¥¼ ì‹¤ì œ í™•ì¸ ê°€ëŠ¥í•œ íŒŒì¼ í¬ë§·ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.

## ğŸ“‹ ë³€í™˜ í”„ë¡œì„¸ìŠ¤

### 1ë‹¨ê³„: ë¦¬ì†ŒìŠ¤ ì¶”ì¶œ ë° ë””ì½”ë”©

```bash
python3 decode_all_resources_complete.py
```

**ìƒì„± ê²°ê³¼:**
- `decoded/` ë””ë ‰í† ë¦¬
  - `resources.json` - ëª¨ë“  ë¦¬ì†ŒìŠ¤ ë©”íƒ€ë°ì´í„°
  - `room_XX/` - Roomë³„ ë””ë ‰í† ë¦¬
    - `background/background.bin` - ì¬êµ¬ì„±ëœ ë°°ê²½ ì´ë¯¸ì§€ (width, height, strip offset table, strip data)
    - `graphics/res_XXX.bin` - ì˜¤ë¸Œì íŠ¸ ê·¸ë˜í”½ (ì›ë³¸)
    - `sounds/res_XXX.bin` - ì‚¬ìš´ë“œ ë°ì´í„° (ì›ë³¸)
    - `scripts/res_XXX.bin` - ìŠ¤í¬ë¦½íŠ¸ ë°”ì´íŠ¸ì½”ë“œ (ì›ë³¸)

### 2ë‹¨ê³„: ì‹¤ì œ íŒŒì¼ í¬ë§·ìœ¼ë¡œ ë³€í™˜

```bash
python3 decode_to_real_files.py
```

**ìƒì„± ê²°ê³¼:**
- `converted/` ë””ë ‰í† ë¦¬
  - `room_XX/` - Roomë³„ ë””ë ‰í† ë¦¬
    - `background.png` - ğŸ–¼ï¸ **PNG ì´ë¯¸ì§€** (320Ã—144, 960Ã—144 ë“±)
    - `sounds/res_XXX.wav` - ğŸ”Š **WAV ì‚¬ìš´ë“œ** (8-bit mono, 11025 Hz)
    - `scripts/res_XXX.txt` - ğŸ“œ **TXT ìŠ¤í¬ë¦½íŠ¸** (hex dump)
    - `graphics/res_XXX.bin` - ì˜¤ë¸Œì íŠ¸ ê·¸ë˜í”½ (ì•„ì§ ë””ì½”ë”© ë¯¸ì§€ì›)

## ğŸ“Š ë³€í™˜ í†µê³„

- **ì´ 74ê°œ Room**
- **954ê°œ ë¦¬ì†ŒìŠ¤**
  - ğŸ–¼ï¸ 73ê°œ ë°°ê²½ ì´ë¯¸ì§€ (PNG)
  - ğŸ”Š 162ê°œ ì‚¬ìš´ë“œ (WAV)
  - ğŸ“œ 95ê°œ ìŠ¤í¬ë¦½íŠ¸ (TXT)
  - ğŸ¨ 438ê°œ ê·¸ë˜í”½ ì˜¤ë¸Œì íŠ¸ (ì›ë³¸)
  - â“ 186ê°œ ë¯¸ë¶„ë¥˜

## ğŸ–¼ï¸ ì´ë¯¸ì§€ í¬ë§·

### PNG ì´ë¯¸ì§€
- **í¬ë§·**: RGB PNG
- **íŒ”ë ˆíŠ¸**: EGA 16ìƒ‰
- **í¬ê¸°**: Roomë§ˆë‹¤ ë‹¤ë¦„
  - Room 01: 320Ã—144 (LUCASFILM GAMES íƒ€ì´í‹€)
  - Room 02: 960Ã—144 (ì‚° í’ê²½)
  - Room 05: 704Ã—144 (í™©ê¸ˆ í…íŠ¸ ë§ˆì„)
  - Room 09: 320Ã—144 (ê±°ëŒ€í•œ Loom ê¸°ê³„)

### EGA 16ìƒ‰ íŒ”ë ˆíŠ¸
```python
0: Black (0x000000)        8: Dark Gray (0x555555)
1: Blue (0x0000AA)         9: Light Blue (0x5555FF)
2: Green (0x00AA00)       10: Light Green (0x55FF55)
3: Cyan (0x00AAAA)        11: Light Cyan (0x55FFFF)
4: Red (0xAA0000)         12: Light Red (0xFF5555)
5: Magenta (0xAA00AA)     13: Light Magenta (0xFF55FF)
6: Brown (0xAA5500)       14: Yellow (0xFFFF55)
7: Light Gray (0xAAAAAA)  15: White (0xFFFFFF)
```

## ğŸ”Š ì‚¬ìš´ë“œ í¬ë§·

### WAV ì‚¬ìš´ë“œ
- **í¬ë§·**: WAV (RIFF)
- **ì±„ë„**: Mono (1ì±„ë„)
- **ë¹„íŠ¸ ê¹Šì´**: 8-bit unsigned
- **ìƒ˜í”Œë ˆì´íŠ¸**: 11025 Hz
- **ì°¸ê³ **: SCUMM v3ì˜ ì‹¤ì œ ì‚¬ìš´ë“œëŠ” PC Speaker beeps, AdLib music ë“± ë‹¤ì–‘í•œ í¬ë§·ì…ë‹ˆë‹¤. í˜„ì¬ëŠ” Raw PCMìœ¼ë¡œ ê°€ì •í•˜ì—¬ ë³€í™˜í•©ë‹ˆë‹¤.

## ğŸ“œ ìŠ¤í¬ë¦½íŠ¸ í¬ë§·

### TXT ìŠ¤í¬ë¦½íŠ¸
- **í¬ë§·**: Hex dump + ASCII
- **ë‚´ìš©**: SCUMM v3 ë°”ì´íŠ¸ì½”ë“œì˜ hex dump
- **ì°¸ê³ **: ì™„ì „í•œ ë””ìŠ¤ì–´ì…ˆë¸”ì€ ì•„ì§ êµ¬í˜„ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.

**ì˜ˆì‹œ:**
```
SCUMM v3 Script - 268 bytes
============================================================

0000  02 17 1C 73 FF 17 1C 78 FF 17 1C 6E FF 17 1C 68  ...s...x...n...h
0010  FF 17 1C 5E FF 17 1C 54 FF 17 1C 4A FF 17 1C 40  ...^...T...J...@
...
```

## ğŸš€ ì‚¬ìš© ì˜ˆì‹œ

### ì´ë¯¸ì§€ í™•ì¸
```bash
# macOS
open converted/room_01/background.png

# Linux
xdg-open converted/room_01/background.png

# Windows
start converted/room_01/background.png
```

### ì‚¬ìš´ë“œ ì¬ìƒ
```bash
# macOS
afplay converted/room_01/sounds/res_005.wav

# Linux
aplay converted/room_01/sounds/res_005.wav

# Windows
start converted/room_01/sounds/res_005.wav
```

### ìŠ¤í¬ë¦½íŠ¸ í™•ì¸
```bash
cat converted/room_01/scripts/res_009.txt
```

## ğŸ”§ í•„ìˆ˜ ìš”êµ¬ì‚¬í•­

### Python íŒ¨í‚¤ì§€
```bash
# ì´ë¯¸ì§€ ë³€í™˜ (PIL)
pip3 install Pillow

# ì‚¬ìš´ë“œ ë³€í™˜ (waveëŠ” Python í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬)
# ì¶”ê°€ ì„¤ì¹˜ ë¶ˆí•„ìš”
```

### ì‹œìŠ¤í…œ ìš”êµ¬ì‚¬í•­
- Python 3.6 ì´ìƒ
- ë””ìŠ¤í¬ ê³µê°„: ì•½ 50MB (`decoded/` + `converted/`)

## ğŸ“ ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
LOOM/
â”œâ”€â”€ decode_all_resources_complete.py  # 1ë‹¨ê³„: ë””ì½”ë”©
â”œâ”€â”€ decode_to_real_files.py          # 2ë‹¨ê³„: ë³€í™˜
â”œâ”€â”€ decoded/                         # ë””ì½”ë”©ëœ ì›ë³¸
â”‚   â”œâ”€â”€ resources.json
â”‚   â””â”€â”€ room_XX/
â”‚       â”œâ”€â”€ background/
â”‚       â”œâ”€â”€ graphics/
â”‚       â”œâ”€â”€ sounds/
â”‚       â””â”€â”€ scripts/
â””â”€â”€ converted/                       # ë³€í™˜ëœ ì‹¤ì œ íŒŒì¼
    â””â”€â”€ room_XX/
        â”œâ”€â”€ background.png          # ğŸ–¼ï¸ PNG
        â”œâ”€â”€ sounds/
        â”‚   â””â”€â”€ *.wav              # ğŸ”Š WAV
        â”œâ”€â”€ scripts/
        â”‚   â””â”€â”€ *.txt              # ğŸ“œ TXT
        â””â”€â”€ graphics/
            â””â”€â”€ *.bin              # ì˜¤ë¸Œì íŠ¸ (ì›ë³¸)
```

## ğŸ¯ ë‹¤ìŒ ë‹¨ê³„

### ì˜¤ë¸Œì íŠ¸ ê·¸ë˜í”½ ë””ì½”ë”©
í˜„ì¬ `graphics/res_XXX.bin` íŒŒì¼ë“¤ì€ ì›ë³¸ í¬ë§· ê·¸ëŒ€ë¡œì…ë‹ˆë‹¤. ì´ë“¤ë„ PNGë¡œ ë³€í™˜í•˜ë ¤ë©´:
1. ê° ì˜¤ë¸Œì íŠ¸ì˜ í¬ë§· íŒŒì•… í•„ìš”
2. SCUMM v3 ì˜¤ë¸Œì íŠ¸ ê·¸ë˜í”½ ë””ì½”ë” êµ¬í˜„
3. PNG ë³€í™˜ ì¶”ê°€

### ì‚¬ìš´ë“œ í¬ë§· ê°œì„ 
SCUMM v3ëŠ” ë‹¤ì–‘í•œ ì‚¬ìš´ë“œ í¬ë§·ì„ ì‚¬ìš©í•©ë‹ˆë‹¤:
- PC Speaker beeps
- AdLib (OPL2) music
- Raw PCM samples

ê° í¬ë§·ì„ ì •í™•íˆ ì‹ë³„í•˜ê³  ì ì ˆí•œ ë³€í™˜ í•„ìš”.

### ìŠ¤í¬ë¦½íŠ¸ ë””ìŠ¤ì–´ì…ˆë¸”ëŸ¬
SCUMM v3 opcode ë””ìŠ¤ì–´ì…ˆë¸”ëŸ¬ êµ¬í˜„ìœ¼ë¡œ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì½ê¸° ì‰¬ìš´ ì–´ì…ˆë¸”ë¦¬ ì½”ë“œë¡œ ë³€í™˜.

## ğŸ“š ì°¸ê³  ìë£Œ

- [ScummVM Source Code](https://github.com/scummvm/scummvm)
- [SCUMM v3 Formats](./SCUMM_V3_FORMATS.md)
- [ìµœì¢…ì„±ê³µ_20251018.md](./ìµœì¢…ì„±ê³µ_20251018.md)
